#!/bin/sh
for file in src/*.c*; do
    file=${file#src/}
    grep picoCTF src/$file > /dev/null
    if [ $? -ne 0 ] ; then
        echo "\n\033[1;36mCompiling $file...\033[0m"
        echo $file | grep cpp$ > /dev/null
        if [ $? -eq 0 ] ; then
            g++ -w -fno-stack-protector src/$file -o bin/${file%.*}
        else
            gcc -w -fno-stack-protector src/$file -o bin/${file%.*}
        fi
    else
        echo "\n\033[1;36mSkipping $file...\033[0m"
        echo "Reason: file has been precompiled.\n"
    fi
done
echo "\033[1;32mCompiling Done!\033[0m"